:root{
  --bg0:#07130c;
  --bg1:#0a1b12;
  --glass: rgba(255,255,255,.14);
  --glass2: rgba(255,255,255,.08);
  --stroke: rgba(255,255,255,.20);
  --text:#f4fff9;
  --muted: rgba(244,255,249,.74);
  --accent:#18c56e;
  --accent2:#66f0a6;
  --green:#22e07e;
  --danger:#ff4d4d;
  --shadow: 0 18px 46px rgba(0,0,0,.55);
  --r: 22px;
  --blur: blur(16px);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(900px 600px at 15% 0%, rgba(34,224,126,.18), transparent 55%),
              radial-gradient(900px 600px at 110% 15%, rgba(102,240,166,.14), transparent 55%),
              linear-gradient(180deg, var(--bg0), var(--bg1));
}
.bg{position:fixed; inset:0; z-index:-1; background:url("assets/bg/pitch.png") center/contain no-repeat; opacity:.14; pointer-events:none}

.hidden{display:none !important}

.top{
  position:fixed; left:0; right:0; top:0; z-index:50;
  display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
  padding:14px;
}
.brand{
  padding:12px 14px; border-radius:18px;
  background: linear-gradient(180deg, var(--glass), var(--glass2));
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  backdrop-filter: var(--blur);
  max-width:min(720px, calc(100vw - 86px));
  display:flex; align-items:center; gap:10px; flex-wrap:wrap;
}
.brand-title{font-weight:1000}
.brand-sub{margin-top:4px; font-size:12px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.icon{
  width:44px; height:44px; border-radius:999px;
  background: linear-gradient(180deg, var(--glass), var(--glass2));
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  color:var(--text);
}
.icon:active{transform:translateY(1px)}
.team-logo{
  width:88px;
  height:52px;
  border-radius:14px;
  object-fit:contain;
  padding:0;
  border:1px solid rgba(255,255,255,.20);
  background: rgba(255,255,255,.06);
  flex:0 0 auto;
}

.main{padding:90px 14px 90px; max-width:1200px; margin:0 auto;}
.page.hidden{display:none}

.hero{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:12px}
.hero-card{
  padding:14px; border-radius:var(--r);
  background: linear-gradient(180deg, rgba(34,224,126,.18), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.18);
  backdrop-filter: var(--blur);
  box-shadow: var(--shadow);
}
.k{font-size:12px; color:var(--muted)}
.v{font-size:20px; font-weight:1000; margin-top:4px}

.card{
  border-radius:var(--r);
  background: linear-gradient(180deg, var(--glass), var(--glass2));
  border:1px solid var(--stroke);
  backdrop-filter: var(--blur);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.card-head{
  display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
  padding:14px; border-bottom:1px solid rgba(255,255,255,.10);
}
.card-title{font-weight:1000}
.card-sub{font-size:12px; color:var(--muted); margin-top:4px}
.actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; align-items:center}
.card-body{padding:14px}
.inline{display:flex; align-items:center; gap:8px; color:var(--muted); font-size:12px}
.inline span{white-space:nowrap}

input,select,button{font:inherit}
input,select{
  padding:12px 12px; border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(7,16,22,.46);
  color: var(--text); outline:none;
}
input:focus,select:focus{border-color: rgba(34,224,126,.55); box-shadow: 0 0 0 4px rgba(34,224,126,.12)}

.btn{
  border:0; padding:12px 14px; border-radius:14px;
  background: linear-gradient(180deg, var(--accent), var(--accent2));
  color:#06130c; font-weight:1000;
  box-shadow: 0 14px 26px rgba(24,197,110,.22);
}
.btn.ghost{
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.16);
  color: var(--text);
  box-shadow:none;
}
.btn:active{transform:translateY(1px)}

.hint{margin-top:10px; font-size:12px; color:var(--muted); line-height:1.35}

/* Presenze */
.table-wrap{overflow:auto; border-radius:18px; border:1px solid rgba(255,255,255,.14); background: rgba(0,0,0,.14);}
.table-wrap table{width:max-content; min-width:100%; border-collapse:separate; border-spacing:0;}
.table-wrap th,.table-wrap td{
  padding:10px 10px; border-right:1px solid rgba(255,255,255,.08);
  border-bottom:1px solid rgba(255,255,255,.08);
  text-align:center; white-space:nowrap; font-size:13px;
}
.table-wrap th{position:sticky; top:0; background: rgba(10,22,28,.85); z-index:3;}
.table-wrap th:first-child,.table-wrap td:first-child{
  position:sticky; left:0; text-align:left; min-width:220px;
  background: rgba(10,22,28,.85); z-index:4;
}
.player-cell{display:flex; align-items:center; gap:10px}
.avatar{
  width:42px; height:42px; border-radius:999px;
  object-fit:cover; background: rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.18);
  display:grid; place-items:center; font-weight:1000;
}
.dot{
  width:22px; height:22px; border-radius:999px;
  border:1px solid rgba(255,255,255,.22);
  background: rgba(255,255,255,.06);
  cursor:pointer;
  display:inline-block;
}
.dot.on{background: rgba(34,224,126,.28); border-color: rgba(34,224,126,.55); box-shadow: 0 0 0 4px rgba(34,224,126,.10) inset;}
.table-wrap.compact th,.table-wrap.compact td{padding:8px 8px; font-size:12px}
.table-wrap.compact .avatar{width:36px; height:36px}
.table-wrap.compact .dot{width:18px; height:18px}
.table-wrap.compact .player-cell{gap:8px}

/* Riepilogo stampa presenze */
.summary-wrap{display:none; margin-top:10px}
.summary-wrap table{width:100%; border-collapse:collapse}
.summary-wrap th,.summary-wrap td{padding:10px 8px; border:1px solid rgba(255,255,255,.14); text-align:left; font-size:13px}
.summary-wrap th{background: rgba(255,255,255,.08)}

/* Rosa */
.roster{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:12px}
.roster-card{
  display:flex; align-items:flex-start; gap:12px; padding:12px;
  border-radius:20px; background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
}
.name{font-weight:1000}
.sub{font-size:12px; color:var(--muted); margin-top:2px}
.role-wrap{display:flex; gap:10px; margin-top:8px; flex-wrap:wrap}
.role-wrap select{padding:10px 10px}
.num{width:92px; padding:10px 10px; border-radius:14px}
.tools{margin-left:auto; display:flex; gap:8px; flex-wrap:wrap}
.small{
  padding:9px 10px; border-radius:14px;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.08);
  color: var(--text);
}
.small.danger{border-color: rgba(255,77,77,.35); background: rgba(255,77,77,.10)}

/* Tattica */
.board-layout{display:grid; grid-template-columns:260px 1fr; gap:12px; align-items:start}
.side{
  padding:12px; border-radius:20px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
}
.side-title{font-weight:1000; margin-bottom:10px}
.side-list{display:flex; flex-direction:column; gap:8px; max-height:70vh; overflow:auto; padding-right:4px}
.chip{
  padding:12px 12px;
  border-radius:18px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
  cursor:pointer;
  user-select:none;
}
.chip:active{transform:translateY(1px)}
.chip-name{font-weight:1000; font-size:13px; line-height:1.2}

.board{display:flex; flex-direction:column; gap:12px}
.fs-wrap{display:flex; flex-direction:column; gap:12px}
.pitch{
  touch-action:none;

  position:relative; width:100%; aspect-ratio:3/2;
  border-radius:24px; overflow:hidden;
  border:1px solid rgba(255,255,255,.16);
  background:url("assets/bg/pitch.png") center/contain no-repeat;
}
.tokens{position:absolute; inset:0; z-index:2; overflow:hidden}
.token{
  touch-action:none;
  will-change: transform;

  position:absolute;
  padding:0;
  background: transparent;
  border:0;
  user-select:none; cursor:grab;
}
.token .avatar{width:48px; height:48px} /* foto grandi */
#ink{position:absolute; inset:0; width:100%; height:100%; z-index:3; pointer-events:none}
.board-actions{display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
body.draw .tokens{pointer-events:none}

/* Partite */
.grid{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:12px}
.field span{display:block; font-size:12px; color:var(--muted); margin-bottom:6px}
.grid-actions{grid-column:1/-1; display:flex; gap:10px; flex-wrap:wrap}
.list{margin-top:12px; display:flex; flex-direction:column; gap:10px}
.item{
  display:flex; justify-content:space-between; gap:12px;
  padding:12px; border-radius:20px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
}
.item .t{font-weight:1000}
.item .s{font-size:12px; color:var(--muted); margin-top:2px}
.item .a{display:flex; gap:8px; flex-wrap:wrap}

/* Nav bottom */
.nav{
  position:fixed; left:0; right:0; bottom:0; z-index:60;
  padding:12px 12px calc(12px + env(safe-area-inset-bottom));
  background: rgba(8,16,22,.76);
  backdrop-filter: var(--blur);
  border-top:1px solid rgba(255,255,255,.14);
  display:flex; gap:10px;
}
.nav-item{
  flex:1; padding:12px 10px; border-radius:18px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color:var(--text); font-weight:1000;
}
.nav-item.active{background: rgba(34,224,126,.18); border-color: rgba(34,224,126,.35);}
.nav-item:active{transform:translateY(1px)}

/* Modali */
.modal{position:fixed; inset:0; z-index:80; display:grid; place-items:center; padding:16px; background: rgba(0,0,0,.55)}
.modal.hidden{display:none}
.modal-card{
  width:min(520px,100%);
  border-radius:26px;
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.18);
  backdrop-filter: var(--blur);
  box-shadow: var(--shadow);
  padding:14px;
}
.modal-title{font-weight:1000; margin-bottom:10px}
.modal-actions{display:flex; gap:10px; justify-content:flex-end; margin-top:10px}

/* Details */
.detail-top{display:flex; align-items:center; gap:12px; margin-top:6px}
.detail-name{font-weight:1000; font-size:18px}
.detail-sub{color:var(--muted); font-size:12px; margin-top:2px}
.detail-grid{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:12px}
.detail-item{padding:10px; border-radius:18px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.14)}
.detail-label{font-size:12px; color:var(--muted)}
.detail-value{font-weight:1000; margin-top:4px}
.detail-avatar-lg .avatar{width:84px; height:84px}

/* Header di stampa (solo print) */
.print-header{display:none !important; align-items:center; gap:14px; padding:12px 14px; margin-bottom:12px; border-radius:18px; background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.16);}
.print-logo{width:110px; height:72px; border-radius:16px; object-fit:contain; padding:0; border:1px solid rgba(255,255,255,.18); background: rgba(255,255,255,.06);}
.print-team{font-size:18px; font-weight:1000}
.print-meta{font-size:12px; color:var(--muted); margin-top:3px}

/* Responsive */
@media (max-width:860px){
  .hero{grid-template-columns:1fr}
  .grid{grid-template-columns:1fr}
  .roster{grid-template-columns:1fr}
  .board-layout{grid-template-columns:1fr}
  .side-list{max-height:240px}
}
@media (max-width:520px){
  .detail-grid{grid-template-columns:1fr}
}

@media print{
  .print-header{display:flex !important}
  .bg,.top,.nav,.modal,.btn,.small,.hint{display:none !important}
  body{background:#fff; color:#000}
  .main{padding:0}
  .card{box-shadow:none; border:1px solid #ddd}
  /* Presenze: stampa riepilogo */
  #attendanceTable{display:none !important}
  #attendanceSummary{display:block !important}
  .summary-wrap th,.summary-wrap td{border:1px solid #ddd}
  .print-meta{color:#333 !important}
}
