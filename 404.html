<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Gestione Squadra</title>
  <meta http-equiv="refresh" content="0; url=./index.html" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <header class="top">
    <div class="brand">
      <img id="teamLogo" class="team-logo hidden" alt="Logo squadra" />
      <div class="brand-title" id="teamTitle">Gestione Squadra</div>
      <div class="brand-sub" id="brandSub">v1.2.06</div>
    </div>
    <button class="icon" id="btnSettings" title="Impostazioni" type="button">⚙️</button>
  </header>

  <main class="main">
    <div class="print-header" id="printHeader">
      <div class="print-left">
        <img id="printLogo" class="print-logo" alt="Logo" />
      </div>
      <div class="print-right">
        <div class="print-team" id="printTeam">—</div>
        <div class="print-meta" id="printMeta">—</div>
        <div class="print-meta" id="printContext">—</div>
      </div>
    </div>
    <!-- PRESENZE -->
    <section class="page" id="page-presenze">
      <div class="hero">
        <div class="hero-card">
          <div class="k">Prossimo allenamento</div>
          <div class="v" id="nextTraining">—</div>
        </div>
        <div class="hero-card">
          <div class="k">Prossima partita</div>
          <div class="v" id="nextMatch">—</div>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <div>
            <div class="card-title">Presenze (Lun • Mer • Gio)</div>
            <div class="card-sub" id="monthTitle">—</div>
          </div>
          <div class="actions">
            <label class="inline">
              <span>Mese</span>
              <select id="monthSelect"></select>
            </label>
            <button class="btn ghost" id="btnPrintAttendance" type="button">Stampa PDF</button>
          </div>
        </div>
        <div class="card-body">
          <div class="table-wrap compact" id="attendanceTable"></div>
          <div class="summary-wrap" id="attendanceSummary"></div>
          <div class="hint">Tocca un pallino per segnare presente. I dati si salvano automaticamente.</div>
        </div>
      </div>
    </section>

    <!-- ROSA -->
    <section class="page hidden" id="page-rosa">
      <div class="card">
        <div class="card-head">
          <div>
            <div class="card-title">Rosa</div>
            <div class="card-sub">Clicca sulla foto per aprire i dettagli (solo visualizzazione).</div>
          </div>
          <div class="actions">
            <button class="btn" id="btnAddPlayer" type="button">+ Aggiungi</button>
            <button class="btn ghost" id="btnPrintRoster" type="button">Stampa PDF</button>
          </div>
        </div>
        <div class="card-body">
          <div class="roster" id="rosterList"></div>
        </div>
      </div>
    </section>

    <!-- TATTICA -->
    <section class="page hidden" id="page-tattica">
      <div class="card">
        <div class="card-head">
          <div>
            <div class="card-title">Lavagna tattica</div>
            <div class="card-sub">Tocca una foto per inserire il giocatore. Trascina per spostarlo.</div>
          </div>
          <div class="actions">
            <button class="btn ghost" id="btnPrintBoard" type="button">Stampa PDF</button>
          </div>
        </div>

        <div class="card-body board-layout">
          <aside class="side">
            <div class="side-title">Giocatori</div>
            <div class="side-grid" id="boardRoster"></div>
          </aside>

          <section class="board">
            <div class="pitch" id="pitch">
              <div class="tokens" id="tokens"></div>
              <canvas id="ink"></canvas>
            </div>
            <div class="board-actions">
              <button class="btn" id="btnPen" type="button">Penna</button>
              <button class="btn ghost" id="btnEraser" type="button">Gomma</button>
              <button class="btn ghost" id="btnClearBoard" type="button">Pulisci tutto</button>
            </div>
            <div class="hint">Per spostare i giocatori: disattiva Penna/Gomma cliccando un’altra modalità (Penna/Gomma) finché nessuna è attiva.</div>
          </section>
        </div>
      </div>
    </section>

    <!-- PARTITE -->
    <section class="page hidden" id="page-partite">
      <div class="card">
        <div class="card-head">
          <div>
            <div class="card-title">Report partite</div>
            <div class="card-sub">Risultati per tempo + scelta Capitano e Vice.</div>
          </div>
          <div class="actions">
            <button class="btn ghost" id="btnPrintMatches" type="button">Stampa PDF</button>
          </div>
        </div>
        <div class="card-body">
          <div class="grid">
            <label class="field"><span>Data</span><input type="date" id="mDate"></label>
            <label class="field"><span>Avversario</span><input type="text" id="mOpponent" placeholder="Es. Tigers"></label>
            <label class="field"><span>1° tempo</span><input type="text" id="mQ1" placeholder="12-10"></label>
            <label class="field"><span>2° tempo</span><input type="text" id="mQ2" placeholder="20-18"></label>
            <label class="field"><span>3° tempo</span><input type="text" id="mQ3" placeholder="33-29"></label>
            <label class="field"><span>4° tempo</span><input type="text" id="mQ4" placeholder="45-40"></label>
            <label class="field"><span>Capitano</span><select id="mCaptain"></select></label>
            <label class="field"><span>Vice</span><select id="mVice"></select></label>
            <div class="grid-actions">
              <button class="btn" id="btnAddMatch" type="button">Salva partita</button>
              <button class="btn ghost" id="btnClearMatchForm" type="button">Pulisci</button>
            </div>
          </div>
          <div class="list" id="matchesList"></div>
        </div>
      </div>
    </section>
  </main>

  <nav class="nav">
    <button class="nav-item active" data-tab="presenze" type="button">Presenze</button>
    <button class="nav-item" data-tab="rosa" type="button">Rosa</button>
    <button class="nav-item" data-tab="tattica" type="button">Tattica</button>
    <button class="nav-item" data-tab="partite" type="button">Partite</button>
  </nav>

  <!-- MODAL: Aggiungi giocatore -->
  <div class="modal hidden" id="modalPlayer">
    <div class="modal-card">
      <div class="modal-title">Aggiungi giocatore</div>
      <label class="field"><span>Nome e Cognome</span><input id="pName" type="text" placeholder="Es. Mario Rossi"></label>
      <label class="field"><span>Foto (opzionale)</span><input id="pPhoto" type="file" accept="image/*"></label>
      <div class="modal-actions">
        <button class="btn" id="btnPlayerSave" type="button">Salva</button>
        <button class="btn ghost" id="btnPlayerCancel" type="button">Annulla</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Dettagli giocatore (SOLO visualizzazione) -->
  <div class="modal hidden" id="modalDetails">
    <div class="modal-card">
      <div class="modal-title">Dettagli giocatore</div>
      <div class="detail-top">
        <div id="dAvatar" class="detail-avatar-lg"></div>
        <div>
          <div class="detail-name" id="dName">—</div>
          <div class="detail-sub" id="dId">—</div>
        </div>
      </div>
      <div class="detail-grid" style="margin-top:12px">
        <div class="detail-item">
          <div class="detail-label">Ruolo</div>
          <div class="detail-value" id="dRole">—</div>
        </div>
        <div class="detail-item">
          <div class="detail-label">Numero maglia</div>
          <div class="detail-value" id="dNumber">—</div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn ghost" id="btnDetailsClose" type="button">Chiudi</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Impostazioni -->
  <div class="modal hidden" id="modalSettings">
    <div class="modal-card">
      <div class="modal-title">Impostazioni</div>
      <label class="field"><span>Nome squadra</span><input id="sTeam" type="text" placeholder="Es. Wildcats"></label>
      <label class="field"><span>Nome e Cognome Mister</span><input id="sMister" type="text" placeholder="Es. Luca Bianchi"></label>
      <label class="field"><span>Categoria</span><select id="sCategory"></select></label>
      <label class="field"><span>Logo squadra (opzionale)</span><input id="sLogo" type="file" accept="image/*"></label>
      <label class="field"><span>Versione</span><input id="sVersion" type="text" placeholder="1.2.05"></label>
      <div class="modal-actions">
        <button class="btn" id="btnSettingsSave" type="button">Salva</button>
        <button class="btn ghost" id="btnSettingsCancel" type="button">Chiudi</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
